// Generated by CoffeeScript 1.8.0
(function() {
  (function(window, document) {
    var element, oboardRequest, oboardUrl;
    element = document.getElementById("oboard-js");
    oboardUrl = "http://localhost/api";
    oboardRequest = function(params, action, callback) {
      params.userSecret = element.getAttribute("data-key");
      params.host = window.location.hostname;
      params.path = window.location.pathname;
      params.port = window.location.port;
      return oboardXHRRequest(params, action, callback, oboardUrl);
    };
    return oboardRequest({
      command: "load-essentials"
    }, "GET", function(response) {
      var interval;
      if (response !== false) {
        response.data.assets.css.forEach(function(href) {
          var link;
          link = document.createElement("link");
          link.href = href;
          link.rel = "stylesheet";
          return document.head.appendChild(link);
        });
        response.data.assets.js.forEach(function(src) {
          var script;
          script = document.createElement("script");
          script.src = src;
          script.type = "text/javascript";
          return document.head.appendChild(script);
        });
        return interval = setInterval(function() {
          if ((window.OBoard != null) && (typeof $ !== "undefined" && $ !== null)) {
            $("body").append(response.data.content);
            clearInterval(interval);
            return window.OBoard.init(response.data.oboard, oboardRequest, element, oboardUrl);
          }
        }, 10);
      }
    });
  })(window, document);

}).call(this);
